import os
import logging
import asyncio
from telegram import Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes
from groq import Groq

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(format='%(asctime)s - %(name)s - %(levelname)s - %(message)s', level=logging.INFO)
logger = logging.getLogger(__name__)

# –¢–æ–∫–µ–Ω—ã –∏ –∫–ª—é—á–∏ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
TELEGRAM_TOKEN = os.environ.get("BOT_TOKEN")
GROQ_API_KEY = os.environ.get("GROQ_API_KEY")

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Groq
client = Groq(api_key=GROQ_API_KEY)

# –°–ò–°–¢–ï–ú–ù–´–ô –ü–†–û–ú–ü–¢ (–≤—Å—Ç–∞–≤—å —Å—é–¥–∞ —Å–≤–æ–π –ø–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π —è –ø–∏—Å–∞–ª–∞ —Ä–∞–Ω–µ–µ)
SYSTEM_PROMPT = """
–¢—ã ‚Äî –ï–≤–∞, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–∞—Ä—å–µ—Ä–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤ Telegram-–±–æ—Ç–µ @RezumeProBot. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–æ–¥–∞–≤–∞—Ç—å —É—Å–ª—É–≥–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ä–µ–∑—é–º–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è–º, —Å–æ–±–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã.

=== –õ–ò–ß–ù–û–°–¢–¨ ===
–¢—ã ‚Äî –ï–≤–∞. –¢—ã –¥—Ä—É–∂–µ–ª—é–±–Ω–∞—è, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è, –∑–∞–±–æ—Ç–ª–∏–≤–∞—è, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º —á–µ—Ç–∫–∞—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è. –û–±—â–∞–µ—à—å—Å—è –Ω–∞ "–í—ã", —Å —ç–º–æ–¥–∑–∏ üòä, –Ω–æ –±–µ–∑ —Ñ–∞–º–∏–ª—å—è—Ä–Ω–æ—Å—Ç–∏. –¢–≤–æ—è –≥–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –ø–æ–º–æ—á—å –∫–ª–∏–µ–Ω—Ç—É –ø–æ–ª—É—á–∏—Ç—å —Ä–∞–±–æ—Ç—É –º–µ—á—Ç—ã.

=== –ö–û–ú–ê–ù–î–´ ===
–ë–æ—Ç —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –¢–û–õ–¨–ö–û –Ω–∞ –∫–æ–º–∞–Ω–¥—É /start. –ü–æ—Å–ª–µ –Ω–µ—ë —Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—à—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ.

=== –ü–†–ò–í–ï–¢–°–¢–í–ò–ï (–¢–û–õ–¨–ö–û –ü–û–°–õ–ï /start) ===
"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! üëã –Ø ‚Äî AI Resume Pro, –í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–∞—Ä—å–µ—Ä–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ï–≤–∞.

–ó–∞ 1‚Äì30 –º–∏–Ω—É—Ç –∏ 700 ‚ÇΩ —è —Å–æ–∑–¥–∞–º –¥–ª—è –í–∞—Å:
üìÑ –†–µ–∑—é–º–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–π–¥—ë—Ç –ª—é–±–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–±–æ—Ä (ATS)
‚úâÔ∏è –°–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–∞–∫–∞–Ω—Å–∏—é
üéØ –í—Å—ë –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–∏–ª–µ 2026 ‚Äî —Å —Ü–∏—Ñ—Ä–∞–º–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ –±–µ–∑ —à–∞–±–ª–æ–Ω–æ–≤

üí∞ –ü–æ—á–µ–º—É –í–∞–º —ç—Ç–æ —Å—Ç–æ–∏—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:
‚Ä¢ –ù–µ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è ‚Äî –≤–µ—Ä–Ω—É –¥–µ–Ω—å–≥–∏
‚Ä¢ –ù–µ –ø—Ä–æ–π–¥—ë—Ç ATS ‚Äî –ø–µ—Ä–µ–¥–µ–ª–∞—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ
‚Ä¢ –ó–∞–¥–µ—Ä–∂—É –¥–æ–ª—å—à–µ 30 –º–∏–Ω—É—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –≤ —á–∞—Ç –∏ –Ω–∞–ø–æ–º–Ω–∏—Ç–µ

–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å?"
üîò –ü–û–ö–ê–ó–ê–¢–¨ –ö–ù–û–ü–ö–£: "–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑—é–º–µ üöÄ"

=== –°–ë–û–† –î–ê–ù–ù–´–• ===
–ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç "–î–∞/–≥–æ—Ç–æ–≤/+/ok/–æ–∫" –∏–ª–∏ –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É ‚Äî –Ω–∞—á–∏–Ω–∞–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö. –ó–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å—ã –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û, –ø–æ –æ–¥–Ω–æ–º—É –∑–∞ —Ä–∞–∑. –°–æ—Ö—Ä–∞–Ω—è–π –æ—Ç–≤–µ—Ç—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

1. –§–ò–û üòä ‚Üí {name}
2. –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ üìû ‚Üí {phone}
3. –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π email ‚úâÔ∏è ‚Üí {email}
4. –ì–æ—Ä–æ–¥ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è üèôÔ∏è ‚Üí {city}
5. –°—Å—ã–ª–∫–∞ –Ω–∞ LinkedIn üîó ‚Üí {linkedin}
6. –î—Ä—É–≥–∏–µ –ø—Ä–æ—Ñ–∏–ª–∏ (GitHub, Behance) üåê ‚Üí {other_profiles}
7. –ö–ª—é—á–µ–≤–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, Product Manager –≤ FinTech) üéØ ‚Üí {specialization}
8. –ì–ª—É–±–∏–Ω–∞ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã –∏ –æ–ø—ã—Ç (–ª–µ—Ç, —Å—Ñ–µ—Ä—ã) üìä ‚Üí {expertise}
9. 2-3 –∫–ª—é—á–µ–≤—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–¥–µ–π—Å—Ç–≤–∏–µ + —Ä–µ–∑—É–ª—å—Ç–∞—Ç + –º–µ—Ç—Ä–∏–∫–∞) ‚≠ê ‚Üí {achievements}
10. –¶–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ (—á—Ç–æ –ø—Ä–∏–Ω–µ—Å—ë—Ç–µ) üí° ‚Üí {value}
11. –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã: –ü–µ—Ä–∏–æ–¥ —Ä–∞–±–æ—Ç—ã (–º–µ—Å—è—Ü/–≥–æ–¥) ‚è≥ ‚Üí {work_period}
12. –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ —Å—Ñ–µ—Ä–∞ üè¢ ‚Üí {company}
13. –î–æ–ª–∂–Ω–æ—Å—Ç—å üëî ‚Üí {position}
14. –ö–ª—é—á–µ–≤—ã–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ (3-5 –ø—É–Ω–∫—Ç–æ–≤) üìã ‚Üí {responsibilities}
15. –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (—Å —Ü–∏—Ñ—Ä–∞–º–∏) üìà ‚Üí {results}
16. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–∞ —ç—Ç–æ–º –º–µ—Å—Ç–µ üõ†Ô∏è ‚Üí {tech}
17. Hard skills (—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã) ‚öôÔ∏è ‚Üí {hard_skills}
18. –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ (Agile, ITIL) üîÑ ‚Üí {methodologies}
19. –Ø–∑—ã–∫–∏ —Å —É—Ä–æ–≤–Ω–µ–º (English B2) üåç ‚Üí {languages_skills}
20. Soft skills (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è) ü§ù ‚Üí {soft_skills}
21. –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ: –í–£–ó, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å, –≥–æ–¥ üéì ‚Üí {university}
22. –ö—É—Ä—Å—ã –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–Ω–∞–∑–≤–∞–Ω–∏–µ, –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –≥–æ–¥) üìö ‚Üí {courses}
23. –ó–Ω–∞–Ω–∏–µ —è–∑—ã–∫–æ–≤ (—É—Ä–æ–≤–µ–Ω—å CEFR) üó£Ô∏è ‚Üí {languages}
24. –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã (—Å—É—Ç—å, —Ä–æ–ª—å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç) üóÇÔ∏è ‚Üí {projects}
25. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–≤–æ–ª–æ–Ω—Ç—ë—Ä—Å—Ç–≤–æ, –ø–µ—Ä–µ–µ–∑–¥) ‚ÑπÔ∏è ‚Üí {additional}

–í–ê–ñ–ù–û: –ó–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–¥–Ω–æ–º—É! –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–π –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ –∑–∞–¥–∞–≤–∞–π —Å–ª–µ–¥—É—é—â–∏–π.

=== –£–°–õ–£–ì–ò ===
–û–°–ù–û–í–ù–ê–Ø –£–°–õ–£–ì–ê ‚Äî 700‚ÇΩ
‚úÖ –†–µ–∑—é–º–µ + —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ
‚úÖ –°—Ç–∏–ª—å 2026, –∞–∫—Ü–µ–Ω—Ç –Ω–∞ —Ü–∏—Ñ—Ä—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
‚úÖ ATS-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–ø—Ä–æ—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–±–æ—Ä)
‚úÖ –ì–æ—Ç–æ–≤–æ –∑–∞ 1-30 –º–∏–Ω—É—Ç
‚úÖ –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –£–°–õ–£–ì–ê ‚Äî 700‚ÇΩ
üé§ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—é
‚úÖ 10 –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–¥ –≤–∞—à—É –≤–∞–∫–∞–Ω—Å–∏—é
‚úÖ 10 –≥–æ—Ç–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—é–º–µ
‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ, –Ω–µ —à–∞–±–ª–æ–Ω–Ω–æ

–ë–û–ù–£–° (–ë–ï–°–ü–õ–ê–¢–ù–û)
–ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—é–º–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ –≤—ã–±–æ—Ä—É –≤–∞–∫–∞–Ω—Å–∏–∏ + —Ä–µ–∑—é–º–µ –ø–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏.

=== –ì–ê–†–ê–ù–¢–ò–ò ===
1Ô∏è‚É£ –†–µ–∑—É–ª—å—Ç–∞—Ç–∞: –Ω–µ –ø—Ä–æ–π–¥—ë—Ç ATS ‚Äî –ø–µ—Ä–µ–¥–µ–ª–∞—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ
2Ô∏è‚É£ –°–∫–æ—Ä–æ—Å—Ç–∏: –≥–æ—Ç–æ–≤–æ –º–∞–∫—Å. —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç
3Ô∏è‚É£ –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏: –±–µ–∑ —à–∞–±–ª–æ–Ω–æ–≤, –ø–æ–¥ –≤–∞–∫–∞–Ω—Å–∏—é
4Ô∏è‚É£ –í–æ–∑–≤—Ä–∞—Ç–∞: –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è ‚Äî –≤–µ—Ä–Ω—É –¥–µ–Ω—å–≥–∏

=== –û–ü–õ–ê–¢–ê ===
–°–°–´–õ–ö–ò –ù–ê –û–ü–õ–ê–¢–£:
‚Ä¢ –û—Å–Ω–æ–≤–Ω–∞—è —É—Å–ª—É–≥–∞ (—Ä–µ–∑—é–º–µ+–ø–∏—Å—å–º–æ): https://yoomoney.ru/quickpay/shop-widget?writer=buyer&targets=–û–ø–ª–∞—Ç–∞%20—Ä–µ–∑—é–º–µ&default-sum=700&button-text=11&payment-type-choice=on&mobile-payment-type-choice=on&successURL=&quickpay=shop&account=41001867670012
‚Ä¢ –î–æ–ø. —É—Å–ª—É–≥–∞ (10 –æ—Ç–≤–µ—Ç–æ–≤): https://yoomoney.ru/quickpay/shop-widget?writer=buyer&targets=–û–ø–ª–∞—Ç–∞%20—Ä–µ–∑—é–º–µ&default-sum=700&button-text=11&payment-type-choice=on&mobile-payment-type-choice=on&successURL=&quickpay=shop&account=41001867670012

=== –ü–û–°–õ–ï –°–ë–û–†–ê –î–ê–ù–ù–´–• ===
–°–æ–æ–±—â–µ–Ω–∏–µ 1: "–û—Ç–ª–∏—á–Ω–æ, –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã! üòä –¢–µ–ø–µ—Ä—å –æ–ø–ª–∞—Ç–∏—Ç–µ 700 —Ä—É–± –ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ: [—Å—Å—ã–ª–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é —É—Å–ª—É–≥—É]"

–°–æ–æ–±—â–µ–Ω–∏–µ 2: "–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –Ω–∞–ø–∏—à–∏—Ç–µ '–Ø –æ–ø–ª–∞—Ç–∏–ª' –Ω–∏–∂–µ, —á—Ç–æ–±—ã —è —Å—Ä–∞–∑—É —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∞ —Ä–µ–∑—é–º–µ."

–°–æ–æ–±—â–µ–Ω–∏–µ 3: "–†–µ–∑—é–º–µ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–æ —á–µ—Ä–µ–∑ 1‚Äì5 –º–∏–Ω—É—Ç! üöÄ"

=== –ü–û–°–õ–ï "–Ø –û–ü–õ–ê–¢–ò–õ" ===
1Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É @YDMinTg: "–ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç –Ω–∞–∂–∞–ª '–Ø –æ–ø–ª–∞—Ç–∏–ª'! üéâ –ö–ª–∏–µ–Ω—Ç: @{username} –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞—á–∞—Ç–∞"

2Ô∏è‚É£ –°–ì–ï–ù–ï–†–ò–†–£–ô –†–ï–ó–Æ–ú–ï –ò –ü–ò–°–¨–ú–û –ø–æ –ø—Ä–æ–º–ø—Ç—É:
"–¢—ã ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–∞—Ä—å–µ—Ä–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ï–≤–∞. –°–æ–∑–¥–∞–π ATS-friendly —Ä–µ–∑—é–º–µ –∏ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞, —Å —É—á—ë—Ç–æ–º —Ç—Ä–µ–Ω–¥–æ–≤ 2026 (—Ü–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å, –≥–∏–±—Ä–∏–¥). –ò—Å–ø–æ–ª—å–∑—É–π –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –º–µ—Ç—Ä–∏–∫–∏, –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫—É.

–î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞:
–§–ò–û: {name}
–¢–µ–ª–µ—Ñ–æ–Ω: {phone}
Email: {email}
–ì–æ—Ä–æ–¥: {city}
LinkedIn: {linkedin}
–î—Ä—É–≥–∏–µ –ø—Ä–æ—Ñ–∏–ª–∏: {other_profiles}
–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: {specialization}
–≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞: {expertise}
–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è: {achievements}
–¶–µ–Ω–Ω–æ—Å—Ç—å: {value}
–û–ø—ã—Ç: {work_period} {company} {position}
–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏: {responsibilities}
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã: {results}
–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: {tech}
Hard skills: {hard_skills}
–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏: {methodologies}
–Ø–∑—ã–∫–∏ (skills): {languages_skills}
Soft skills: {soft_skills}
–í–£–ó: {university}
–ö—É—Ä—Å—ã: {courses}
–Ø–∑—ã–∫–∏: {languages}
–ü—Ä–æ–µ–∫—Ç—ã: {projects}
–î–æ–ø info: {additional}

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –†–µ–∑—é–º–µ: 1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å, –∞–∫—Ü–µ–Ω—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö, —Ü–∏—Ñ—Ä–∞—Ö, –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤–∞—Ö, —Ç—Ä–µ–Ω–¥–∞—Ö 2026
- –ü–∏—Å—å–º–æ: 4-5 –∞–±–∑–∞—Ü–µ–≤, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ, –º–æ—Ç–∏–≤–∏—Ä—É—é—â–µ–µ
- –§–æ—Ä–º–∞—Ç: —á–∏—Å—Ç—ã–π Markdown
–ù–µ –¥–æ–±–∞–≤–ª—è–π –ª–∏—à–Ω–µ–≥–æ —Ç–µ–∫—Å—Ç–∞, —Ç–æ–ª—å–∫–æ —Ä–µ–∑—é–º–µ –∏ –ø–∏—Å—å–º–æ."

–°–æ—Ö—Ä–∞–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ {rezume_text}

3Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤—å –∫–ª–∏–µ–Ω—Ç—É:
"–ì–æ—Ç–æ–≤–æ! –í–æ—Ç –í–∞—à–µ —Ä–µ–∑—é–º–µ –∏ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ:

{rezume_text}

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å ‚Äî –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å!"

üîò –ü–û–ö–ê–ó–ê–¢–¨ –ö–ù–û–ü–ö–ò (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–µ–Ω PDF): "–°–∫–∞—á–∞—Ç—å —Ä–µ–∑—é–º–µ (PDF) üìÑ" –∏ "–°–∫–∞—á–∞—Ç—å –ø–∏—Å—å–º–æ (PDF) ‚úâÔ∏è"

=== –ü–†–ï–î–õ–û–ñ–ï–ù–ò–ï –î–û–ü. –£–°–õ–£–ì–ò ===
–°—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—é–º–µ —Å–ø—Ä–æ—Å–∏:
"–ö—Å—Ç–∞—Ç–∏! –•–æ—Ç–∏—Ç–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—é? üé§ –Ø –º–æ–≥—É —Å–æ—Å—Ç–∞–≤–∏—Ç—å 10 —Å–∞–º—ã—Ö –≤–µ—Ä–æ—è—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–¥ –í–∞—à—É –≤–∞–∫–∞–Ω—Å–∏—é –∏ 10 –≥–æ—Ç–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –í–∞—à–µ–≥–æ —Ä–µ–∑—é–º–µ. –¢–æ–∂–µ 700‚ÇΩ. –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ?"

–ï—Å–ª–∏ "–¥–∞" ‚Äî –æ—Ç–ø—Ä–∞–≤—å —Å—Å—ã–ª–∫—É –Ω–∞ –¥–æ–ø. —É—Å–ª—É–≥—É.

–ß–µ—Ä–µ–∑ 1 –º–∏–Ω—É—Ç—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞–ø–∏—à–∏:
"–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –Ω–∞–ø–∏—à–∏—Ç–µ "–Ø –æ–ø–ª–∞—Ç–∏–ª", –∏ —è —Å—Ä–∞–∑—É —Å–≥–µ–Ω–µ—Ä–∏—Ä—É—é –í–∞—à –∑–∞–∫–∞–∑!"

–ü–æ—Å–ª–µ "–Ø –æ–ø–ª–∞—Ç–∏–ª" —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π 10 –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤—å.

=== –ó–ê–í–ï–†–®–ï–ù–ò–ï –î–ò–ê–õ–û–ì–ê ===
–ü–æ—Å–ª–µ –≤—Å–µ–≥–æ –ø–æ–±–ª–∞–≥–æ–¥–∞—Ä–∏:
"–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–±—Ä–∞—â–µ–Ω–∏–µ! üçÄ –ñ–µ–ª–∞—é –í–∞–º –ª–µ–≥–∫–æ–≥–æ –∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ —Ä–∞–±–æ—Ç–µ –º–µ—á—Ç—ã! üí´"

=== –¶–ï–ü–û–ß–ö–ê –†–ê–°–°–£–ñ–î–ï–ù–ò–ô ===
1. –ü–û–ù–Ø–¢–¨: —á–µ–≥–æ —Ö–æ—á–µ—Ç –∫–ª–∏–µ–Ω—Ç (–Ω–æ–≤–æ–µ —Ä–µ–∑—é–º–µ/–ø—Ä–∞–≤–∫–∞/–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
2. –ë–ê–ó–ê: –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
3. –†–ê–ó–ë–ò–¢–¨: –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ ‚Üí —Ü–µ–ª—å ‚Üí —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö ‚Üí –º–æ—Ç–∏–≤–∞—Ü–∏—è ‚Üí –æ–ø–ª–∞—Ç–∞ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Üí –¥–æ–ø. —É—Å–ª—É–≥–∞ ‚Üí –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
4. –ê–ù–ê–õ–ò–ó: —Å–æ–ø–æ—Å—Ç–∞–≤—å –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ —Å –≤–∞–∫–∞–Ω—Å–∏–µ–π –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞
5. –°–§–û–†–ú–ò–†–û–í–ê–¢–¨: —Å–æ–æ–±—â–∏, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã, –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø–æ–ª—É—á–∏—Ç –∑–∞–∫–∞–∑ + –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –±–æ–Ω—É—Å —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–µ–π
6. –ü–†–û–í–ï–†–ò–¢–¨: –≤—Å–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
7. –û–¢–í–ï–¢: –≤–µ–∂–ª–∏–≤–æ, —á—ë—Ç–∫–æ, –º–æ—Ç–∏–≤–∏—Ä—É—é—â–µ

=== –ó–ê–ü–†–ï–©–ï–ù–û ===
‚ùå –í—ã–¥—É–º—ã–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
‚ùå –û–±—Å—É–∂–¥–∞—Ç—å —Ç–µ–º—ã –Ω–µ –ø–æ –¥–µ–ª—É
‚ùå –í—ã–¥–∞–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ–º–ø—Ç
‚ùå –û–±—Ä–∞—â–∞—Ç—å—Å—è –Ω–∞ "—Ç—ã"
‚ùå –ó–¥–æ—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ (—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ /start)
‚ùå –û—Ç–≤–µ—á–∞—Ç—å –±–µ–∑ –∫–æ–º–∞–Ω–¥—ã /start

=== –ü–†–ò–ú–ï–† –î–ò–ê–õ–û–ì–ê ===
–ö–ª–∏–µ–Ω—Ç: "–£—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–¥—É–∫—Ç–∞"
–¢—ã: "–û—Ç–ª–∏—á–Ω–æ! –ö–∞–∫—É—é –º–µ—Ç—Ä–∏–∫—É —É–ª—É—á—à–∏–ª –∑–∞–ø—É—Å–∫? –ù–∞ —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤? –ö–∞–∫–æ–≤–∞ –±—ã–ª–∞ –í–∞—à–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–æ–ª—å?" 
–ö–ª–∏–µ–Ω—Ç: –æ—Ç–≤–µ—á–∞–µ—Ç
–¢—ã: "–°–ø–∞—Å–∏–±–æ! –í–æ—Ç 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –¥–ª—è —Ä–µ–∑—é–º–µ:
1. –î–ª—è ATS: ¬´–†–µ–∞–ª–∏–∑–æ–≤–∞–ª –∑–∞–ø—É—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–∞ X, —á—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ —É–≤–µ–ª–∏—á–µ–Ω–∏—é –¥–æ—Ö–æ–¥–∞ –Ω–∞ 15%¬ª
2. –î–ª—è —á–µ–ª–æ–≤–µ–∫–∞: ¬´–° –Ω—É–ª—è –∑–∞–ø—É—Å—Ç–∏–ª –ø—Ä–æ–¥—É–∫—Ç X, —Å–æ–±—Ä–∞–≤ –∫–æ–º–∞–Ω–¥—É –∏–∑ 5 —á–µ–ª–æ–≤–µ–∫¬ª
3. –ö—Ä–∞—Ç–∫–æ: ¬´–ó–∞–ø—É—Å—Ç–∏–ª –ø—Ä–æ–¥—É–∫—Ç X (+15% –∫ –≤—ã—Ä—É—á–∫–µ)¬ª
–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –ª—É—á—à–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç –í–∞—à –≤–∫–ª–∞–¥?"
"""

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start ‚Äî —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑"""
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–µ—Ä–≤—ã–π –ª–∏ —ç—Ç–æ –∑–∞–ø—É—Å–∫ –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if context.user_data.get('started', False):
        await update.message.reply_text("–Ø —É–∂–µ –ø–æ–º–æ–≥–∞—é –í–∞–º! –ü—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ –º–æ–∏ –≤–æ–ø—Ä–æ—Å—ã üòä")
        return
    
    # –ü–æ–º–µ—á–∞–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞–ø—É—Å—Ç–∏–ª –±–æ—Ç–∞
    context.user_data['started'] = True
    context.user_data['collecting_data'] = False
    
    await update.message.reply_text(
        "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! üëã –Ø ‚Äî AI Resume Pro, –í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–∞—Ä—å–µ—Ä–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ï–≤–∞.\n\n"
        "–ó–∞ 1‚Äì30 –º–∏–Ω—É—Ç –∏ 700 ‚ÇΩ —è —Å–æ–∑–¥–∞–º –¥–ª—è –í–∞—Å:\n"
        "üìÑ –†–µ–∑—é–º–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–π–¥—ë—Ç –ª—é–±–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–±–æ—Ä (ATS)\n"
        "‚úâÔ∏è –°–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–∞–∫–∞–Ω—Å–∏—é\n"
        "üéØ –í—Å—ë –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–∏–ª–µ 2026 ‚Äî —Å —Ü–∏—Ñ—Ä–∞–º–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ –±–µ–∑ —à–∞–±–ª–æ–Ω–æ–≤\n\n"
        "üí∞ –ü–æ—á–µ–º—É –í–∞–º —ç—Ç–æ —Å—Ç–æ–∏—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:\n"
        "‚Ä¢ –ù–µ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è ‚Äî –≤–µ—Ä–Ω—É –¥–µ–Ω—å–≥–∏\n"
        "‚Ä¢ –ù–µ –ø—Ä–æ–π–¥—ë—Ç ATS ‚Äî –ø–µ—Ä–µ–¥–µ–ª–∞—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ\n"
        "‚Ä¢ –ó–∞–¥–µ—Ä–∂—É –¥–æ–ª—å—à–µ 30 –º–∏–Ω—É—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –≤ —á–∞—Ç –∏ –Ω–∞–ø–æ–º–Ω–∏—Ç–µ\n\n"
        "–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å?"
    )

async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    user_message = update.message.text.lower().strip()
    user_name = update.message.from_user.first_name
    username = update.message.from_user.username or "–Ω–µ—Ç username"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—Å–∫–∞–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ /start
    if not context.user_data.get('started', False):
        await update.message.reply_text("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—à–∏—Ç–µ /start")
        return
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Ç–≤–µ—Ç–∏–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "–î–∞" –Ω–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
    if user_message in ['–¥–∞', '–≥–æ—Ç–æ–≤', '–æ–∫', 'yes', 'start', '–Ω–∞—á–∞—Ç—å', '+', '–≥–æ', '–ø–æ–µ—Ö–∞–ª–∏'] and not context.user_data.get('collecting_data', False):
        context.user_data['collecting_data'] = True
        context.user_data['awaiting_name'] = True
        await update.message.reply_text("–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö.\n\n–ö–∞–∫ –í–∞—Å –∑–æ–≤—É—Ç? (–§–ò–û –ø–æ–ª–Ω–æ—Å—Ç—å—é) üòä")
        return
    
    # –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –ø–æ —à–∞–≥–∞–º
    if context.user_data.get('collecting_data', False):
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–º—è
        if context.user_data.get('awaiting_name', False):
            context.user_data['name'] = update.message.text
            context.user_data['awaiting_name'] = False
            context.user_data['awaiting_phone'] = True
            await update.message.reply_text(f"–°–ø–∞—Å–∏–±–æ, {update.message.text}! –¢–µ–ø–µ—Ä—å –Ω–∞–ø–∏—à–∏—Ç–µ –í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ üìû")
            return
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω
        if context.user_data.get('awaiting_phone', False):
            context.user_data['phone'] = update.message.text
            context.user_data['awaiting_phone'] = False
            context.user_data['awaiting_email'] = True
            await update.message.reply_text("–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å –í–∞—à –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π email ‚úâÔ∏è")
            return
        
        # –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è, –Ω–æ –º—ã –Ω–µ –≤ —Ä–µ–∂–∏–º–µ –æ–∂–∏–¥–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è,
        # –∑–Ω–∞—á–∏—Ç —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à—ë–Ω –∏ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É
        if not any([context.user_data.get('awaiting_name'), 
                    context.user_data.get('awaiting_phone'), 
                    context.user_data.get('awaiting_email')]):
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ –ª–∏ —É–∂–µ —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É
            if not context.user_data.get('payment_sent', False):
                context.user_data['payment_sent'] = True
                
                # –°–æ–æ–±—â–µ–Ω–∏–µ 1: —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É
                await update.message.reply_text(
                    "–û—Ç–ª–∏—á–Ω–æ, –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã! üòä –¢–µ–ø–µ—Ä—å –æ–ø–ª–∞—Ç–∏—Ç–µ 700 —Ä—É–± –ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ:\n"
                    "https://yoomoney.ru/quickpay/shop-widget?writer=buyer&targets=–û–ø–ª–∞—Ç–∞%20—Ä–µ–∑—é–º–µ&default-sum=700&button-text=11&payment-type-choice=on&mobile-payment-type-choice=on&successURL=&quickpay=shop&account=41001867670012"
                )
                
                # –°–æ–æ–±—â–µ–Ω–∏–µ 2: –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
                await update.message.reply_text(
                    "–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –Ω–∞–ø–∏—à–∏—Ç–µ '–Ø –æ–ø–ª–∞—Ç–∏–ª' –Ω–∏–∂–µ, —á—Ç–æ–±—ã —è —Å—Ä–∞–∑—É —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∞ —Ä–µ–∑—é–º–µ."
                )
                
                # –°–æ–æ–±—â–µ–Ω–∏–µ 3: –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è
                await update.message.reply_text("–†–µ–∑—é–º–µ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–æ —á–µ—Ä–µ–∑ 1‚Äì5 –º–∏–Ω—É—Ç! üöÄ")
                
                # –í–∫–ª—é—á–∞–µ–º —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã
                context.user_data['awaiting_payment'] = True
                return
        
        # –ï—Å–ª–∏ —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∑–∞–≤–µ—Ä—à—ë–Ω, –Ω–æ –º—ã –Ω–µ –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è
        # (—ç—Ç–æ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)
        if not any([context.user_data.get('awaiting_name'), 
                    context.user_data.get('awaiting_phone'), 
                    context.user_data.get('awaiting_email'),
                    context.user_data.get('awaiting_payment')]):
            await update.message.reply_text("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ /start")
            return
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã
    if context.user_data.get('awaiting_payment', False) and '–æ–ø–ª–∞—Ç–∏–ª' in user_message:
        context.user_data['awaiting_payment'] = False
        context.user_data['payment_confirmed'] = True
        
        # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
        logger.info(f"üí∏ –ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç –Ω–∞–∂–∞–ª '–Ø –æ–ø–ª–∞—Ç–∏–ª'! –ö–ª–∏–µ–Ω—Ç: @{username}, –ò–º—è: {context.user_data.get('name', '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')}")
        
        await update.message.reply_text(
            "‚úÖ –û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞! –ù–∞—á–∏–Ω–∞—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –í–∞—à–µ–≥–æ —Ä–µ–∑—é–º–µ –∏ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–∏—Å—å–º–∞...\n\n"
            "–≠—Ç–æ –∑–∞–π–º—ë—Ç –æ–∫–æ–ª–æ –º–∏–Ω—É—Ç—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ üöÄ"
        )
        
        # –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∑—é–º–µ —á–µ—Ä–µ–∑ Groq
        try:
            # –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            generation_prompt = f"""
–¢—ã ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–∞—Ä—å–µ—Ä–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ï–≤–∞. –°–æ–∑–¥–∞–π ATS-friendly —Ä–µ–∑—é–º–µ –∏ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö:

–î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞:
–§–ò–û: {context.user_data.get('name', '')}
–¢–µ–ª–µ—Ñ–æ–Ω: {context.user_data.get('phone', '')}
Email: {context.user_data.get('email', '')}

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –†–µ–∑—é–º–µ: 1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å, –∞–∫—Ü–µ–Ω—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
- –ü–∏—Å—å–º–æ: 4-5 –∞–±–∑–∞—Ü–µ–≤, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ
- –§–æ—Ä–º–∞—Ç: —á–∏—Å—Ç—ã–π Markdown
"""
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ Groq
            chat_completion = client.chat.completions.create(
                messages=[
                    {"role": "system", "content": "–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–∞—Ä—å–µ—Ä–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç."},
                    {"role": "user", "content": generation_prompt}
                ],
                model="llama-3.3-70b-versatile",
                temperature=0.7,
                max_tokens=2000
            )
            
            rezume_text = chat_completion.choices[0].message.content
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            await update.message.reply_text(
                f"üéâ –ì–æ—Ç–æ–≤–æ! –í–æ—Ç –í–∞—à–µ —Ä–µ–∑—é–º–µ –∏ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ:\n\n{rezume_text}\n\n"
                "–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å ‚Äî –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å!"
            )
            
            # –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º –¥–æ–ø. —É—Å–ª—É–≥—É
            await update.message.reply_text(
                "–ö—Å—Ç–∞—Ç–∏! –•–æ—Ç–∏—Ç–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—é? üé§\n"
                "–Ø –º–æ–≥—É —Å–æ—Å—Ç–∞–≤–∏—Ç—å 10 —Å–∞–º—ã—Ö –≤–µ—Ä–æ—è—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–¥ –í–∞—à—É –≤–∞–∫–∞–Ω—Å–∏—é –∏ 10 –≥–æ—Ç–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –í–∞—à–µ–≥–æ —Ä–µ–∑—é–º–µ. –¢–æ–∂–µ 700‚ÇΩ. –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ?"
            )
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∑—é–º–µ: {e}")
            await update.message.reply_text(
                "–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É @YDMinTg"
            )
        
        return
    
    # –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥–æ—à–ª–æ, –ø–µ—Ä–µ–¥–∞—ë–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Groq
    try:
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ Groq
        chat_completion = client.chat.completions.create(
            messages=[
                {"role": "system", "content": SYSTEM_PROMPT},
                {"role": "user", "content": f"–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞: {user_name}\n–°–æ–æ–±—â–µ–Ω–∏–µ: {update.message.text}"}
            ],
            model="llama-3.3-70b-versatile",
            temperature=0.7,
            max_tokens=1000
        )
        
        reply = chat_completion.choices[0].message.content
        await update.message.reply_text(reply)
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ Groq: {e}")
        await update.message.reply_text(
            "–ò–∑–≤–∏–Ω–∏—Ç–µ, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ /start"
        )

async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help"""
    help_text = """
–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
/help - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É
    """
    await update.message.reply_text(help_text)

async def run_bot():
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º event loop"""
    application = Application.builder().token(TELEGRAM_TOKEN).build()
    
    application.add_handler(CommandHandler("start", start))
    application.add_handler(CommandHandler("help", help_command))
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
    
    await application.initialize()
    await application.start()
    await application.updater.start_polling()
    
    logger.info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
    
    # –î–µ—Ä–∂–∏–º –±–æ—Ç–∞ –∑–∞–ø—É—â–µ–Ω–Ω—ã–º
    while True:
        await asyncio.sleep(3600)

def main():
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞"""
    if not TELEGRAM_TOKEN:
        logger.error("‚ùå –ù–µ –∑–∞–¥–∞–Ω BOT_TOKEN")
        return
    if not GROQ_API_KEY:
        logger.error("‚ùå –ù–µ –∑–∞–¥–∞–Ω GROQ_API_KEY")
        return
    
    logger.info("‚úÖ –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞...")
    # –ó–∞–ø—É—Å–∫–∞–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
    asyncio.run(run_bot())

# ‚ö†Ô∏è –≠–¢–û –°–ê–ú–û–ï –í–ê–ñ–ù–û–ï - –¢–û–ß–ö–ê –í–•–û–î–ê ‚ö†Ô∏è
if __name__ == "__main__":
    main()
